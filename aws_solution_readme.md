# Автоматизация отчетов Facebook Ads с использованием AWS

Это решение позволяет автоматически собирать ежедневные отчеты о рекламных кампаниях Facebook и отправлять их в Telegram с использованием сервисов AWS.

## Обзор решения

Решение использует следующие сервисы AWS:

- **AWS Lambda** - для выполнения кода, который собирает данные из Facebook Marketing API и формирует отчеты
- **Amazon S3** - для хранения отчетов и пакета Lambda
- **Amazon EventBridge** - для запуска Lambda функции по расписанию
- **AWS CloudFormation** - для автоматического развертывания всех ресурсов

## Архитектура

![Архитектура решения](https://i.imgur.com/example.png)

1. EventBridge запускает Lambda функцию ежедневно в 8:00 UTC
2. Lambda функция подключается к Facebook Marketing API и получает данные о рекламных кампаниях
3. Функция формирует отчет и сохраняет его в S3 бакет
4. Функция отправляет отчет в Telegram
5. Логи выполнения сохраняются в CloudWatch Logs

## Файлы решения

- `lambda_function.py` - код AWS Lambda функции
- `prepare_lambda_package.sh` - скрипт для подготовки пакета Lambda
- `cloudformation-template.yaml` - шаблон CloudFormation для развертывания ресурсов
- `aws_deployment_guide.md` - подробное руководство по развертыванию

## Преимущества решения

- **Автоматизация** - отчеты генерируются и отправляются автоматически без ручного вмешательства
- **Масштабируемость** - AWS Lambda автоматически масштабируется при необходимости
- **Надежность** - AWS обеспечивает высокую доступность и отказоустойчивость
- **Безопасность** - секретные данные хранятся в переменных окружения Lambda
- **Экономичность** - вы платите только за фактическое время выполнения Lambda функции

## Начало работы

Для развертывания решения следуйте инструкциям в файле [aws_deployment_guide.md](aws_deployment_guide.md).

## Требования

- Аккаунт AWS
- AWS CLI
- Python 3.9 или выше
- Приложение Facebook с доступом к Marketing API
- Бот Telegram

## Настройка

Основные параметры настройки:

- **S3BucketName** - имя S3 бакета для хранения отчетов
- **FacebookAppId** - ID приложения Facebook
- **FacebookAppSecret** - секрет приложения Facebook
- **FacebookAccessToken** - токен доступа Facebook
- **FacebookAdAccountId** - ID рекламного аккаунта Facebook
- **TelegramBotToken** - токен бота Telegram
- **TelegramChatId** - ID чата Telegram для отправки отчетов

## Расширение функциональности

Вы можете расширить функциональность решения:

1. Добавить отправку отчетов по электронной почте с помощью Amazon SES
2. Настроить дополнительные метрики и визуализации с помощью Amazon QuickSight
3. Создать API для доступа к отчетам с помощью Amazon API Gateway
4. Добавить уведомления о проблемах с помощью Amazon SNS

## Лицензия

Этот проект распространяется под лицензией MIT. 