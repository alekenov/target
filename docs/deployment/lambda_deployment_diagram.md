# Архитектура бессерверного развертывания Facebook Ads Dashboard

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│                 │     │                 │     │                 │
│   Пользователь  │────▶│   CloudFront    │────▶│   API Gateway   │
│                 │     │                 │     │                 │
└─────────────────┘     └─────────────────┘     └────────┬────────┘
                                                         │
                                                         ▼
┌─────────────────┐                           ┌─────────────────┐
│                 │                           │                 │
│  Aurora MySQL   │◀──────────────────────────│  AWS Lambda     │
│                 │                           │                 │
└─────────────────┘                           └─────────────────┘
        ▲                                              │
        │                                              │
        │                                              ▼
┌───────┴───────┐                           ┌─────────────────┐
│               │                           │                 │
│ Facebook API  │◀──────────────────────────│  CloudWatch     │
│               │                           │                 │
└───────────────┘                           └─────────────────┘
```

## Компоненты архитектуры

1. **Пользователь** - Получает доступ к дашборду через веб-браузер

2. **CloudFront** - Сервис доставки контента (CDN)
   - Обеспечивает HTTPS
   - Кэширует статические ресурсы
   - Улучшает производительность

3. **API Gateway** - Управление API
   - Маршрутизирует запросы к Lambda
   - Обеспечивает масштабирование
   - Управляет доступом

4. **AWS Lambda** - Бессерверные вычисления
   - Запускает Flask-приложение
   - Обрабатывает запросы
   - Взаимодействует с базой данных
   - Получает данные из Facebook API

5. **Aurora MySQL** - Реляционная база данных
   - Хранит данные о кампаниях
   - Хранит статистику и метрики
   - Обеспечивает высокую доступность

6. **Facebook API** - Внешний API
   - Предоставляет данные о рекламных кампаниях
   - Обеспечивает доступ к метрикам

7. **CloudWatch** - Мониторинг и логирование
   - Собирает логи Lambda
   - Отслеживает производительность
   - Настраивает оповещения

## Поток данных

1. Пользователь открывает URL дашборда в браузере
2. CloudFront получает запрос и перенаправляет его в API Gateway
3. API Gateway вызывает Lambda функцию
4. Lambda функция запускает Flask-приложение
5. Flask-приложение подключается к Aurora MySQL для получения данных
6. При необходимости Lambda обращается к Facebook API для обновления данных
7. Результаты возвращаются пользователю через API Gateway и CloudFront
8. CloudWatch собирает логи и метрики для мониторинга

## Преимущества архитектуры

1. **Масштабируемость** - Автоматическое масштабирование при увеличении нагрузки
2. **Отказоустойчивость** - Высокая доступность всех компонентов
3. **Безопасность** - HTTPS, управление доступом, VPC для Lambda
4. **Экономичность** - Оплата только за фактическое использование
5. **Простота обновления** - Обновление кода без простоев
