# Техническая задача для основных файлов системы и их взаимодействие

## `config.py`
**Техническая задача:**
- Создать центральный конфигурационный модуль с константами и настройками
- Определить параметры подключения к Facebook API и базе данных
- Настроить параметры сбора данных (интервалы, лимиты запросов)
- Определить пороговые значения для метрик (CTR, CPC, конверсии)

## `db_setup.py`
**Техническая задача:**
- Создать скрипт инициализации схемы базы данных
- Реализовать создание всех необходимых таблиц с правильными типами данных
- Настроить индексы для оптимальной производительности запросов
- Создать необходимые связи между таблицами (foreign keys)
- Добавить миграции для обновления схемы при необходимости

## `db_utils.py`
**Техническая задача:**
- Разработать класс для управления пулом соединений с базой данных
- Реализовать функции CRUD-операций (create, read, update, delete)
- Создать специализированные функции для работы с рекламными данными
- Реализовать функции для пакетной вставки/обновления данных
- Добавить функции для транзакций и обработки ошибок

## `fb_api.py`
**Техническая задача:**
- Разработать класс-обертку для Facebook Marketing API
- Реализовать методы для всех необходимых API-запросов (кампании, группы, объявления, статистика)
- Добавить обработку ограничений API (rate limits) с экспоненциальной задержкой
- Реализовать кеширование запросов для оптимизации
- Добавить механизмы повторных попыток при сбоях API

## `data_collector.py`
**Техническая задача:**
- Разработать основной модуль сбора данных из Facebook
- Реализовать функции для сбора структуры рекламных кампаний
- Создать функции сбора статистики с разной периодичностью (почасовую, ежедневную)
- Добавить логирование процесса сбора данных
- Реализовать обработку ошибок с уведомлениями

## Схема взаимодействия файлов:

1. **Инициализация:**
   ```
   db_setup.py → использует config.py для настроек → создает структуру в БД
   ```

2. **Сбор данных:**
   ```
   data_collector.py → использует config.py для настроек
                     → вызывает fb_api.py для получения данных из Facebook
                     → использует db_utils.py для сохранения данных в БД
   ```

3. **Поток данных:**
   ```
   Facebook API → fb_api.py (преобразует данные) → data_collector.py (обрабатывает)
   → db_utils.py (сохраняет) → База данных
   ```

4. **Обработка ошибок:**
   ```
   Любой файл → логирует ошибки → data_collector.py принимает решение
   о повторных попытках или прекращении работы
   ```

Каждый файл выполняет свои специализированные функции, при этом система организована как конвейер, где данные последовательно обрабатываются и сохраняются, а настройки централизованно управляются через config.py.




report_generator.py
Техническая задача:

Разработать класс для создания разных типов отчетов (ежедневные, 4-часовые)
Реализовать SQL-запросы для агрегации данных из БД
Создать функции для расчета ключевых метрик (ROAS, конверсии)
Реализовать форматирование данных для Telegram-сообщений
Добавить сравнительный анализ с предыдущими периодами

telegram_sender.py
Техническая задача:

Разработать класс для отправки сообщений в Telegram
Реализовать форматирование сообщений с Markdown/HTML
Добавить обработку ошибок при отправке
Создать функции для отправки разных типов уведомлений (отчеты, алерты)